# Представления (View)
## Теория
Что такое представление (View)?

Это Python-функция или класс, который принимает веб-запрос (request) и возвращает веб-ответ (response).

Это мост между вашими данными (моделями) и их представлением (шаблоном). View запрашивает данные у моделей, обрабатывает их и передает в шаблон для отображения.

Простая аналогия: Официант в ресторане. Он принимает ваш заказ (запрос), идет на кухню (к моделям и БД), получает блюда (данные), maybe немного их украшает (обработка) и приносит вам (ответ).

Обработчики запросов (request) и ответов (response)

HttpRequest (request): Объект, который Django автоматически создает для каждого входящего запроса. Он содержит метаданные о запросе: GET/POST параметры, IP-адрес пользователя, cookies, данные формы и т.д.

HttpResponse (response): Объект, который вы должны вернуть из view. Он содержит данные для отправки обратно пользователю: HTML-код, статус код (200, 404), заголовки.

Концепция HttpResponse и шаблонов

Самый простой способ что-то вернуть — создать HttpResponse с текстом: return HttpResponse("Hello World").

Но возвращать готовый HTML-код строкой — неудобно. Для этого существуют шаблоны (Templates).

Функция render() — это укороченный способ. Она берет:

Объект request.

Путь к шаблону (HTML-файлу).

Контекст (словарь с данными, которые нужно передать в шаблон).
...и возвращает готовый HttpResponse с отрендеренным HTML.

## Практика
view-функция
blog/views.py
Импортируем нашу модель Post и используем функцию render.
```python
from django.shortcuts import render
from django.http import HttpResponse
# Импортируем модель Post
from .models import Post

def post_list(request):
    # 1. Получаем ВСЕ опубликованные посты из базы данных.
    # Пока что мы просто получим все, без фильтрации.
    # Метод .all() возвращает QuerySet (набор запросов) - список объектов модели.
    posts = Post.objects.all()

    # 2. Теперь вместо HttpResponse используем render.
    # Первый аргумент - всегда request.
    # Второй аргумент - путь к шаблону (пока его нет, создадим на следующем шаге).
    # Третий аргумент - контекст. Это словарь, который передается в шаблон.
    # Ключи словаря - это имена переменных, которые станут доступны в шаблоне.
    context = {
        'posts': posts, # Передаем наш список постов в шаблон под именем 'posts'
        'title': 'Главная страница блога'
    }
    return render(request, 'blog/post_list.html', context)
```
Теперь нужно подключить blog/urls.py к главному myblog/urls.py
```python
from django.contrib import admin
from django.urls import path, include # <- Добавляем include

urlpatterns = [
    path('admin/', admin.site.urls),
    # Говорим: все пути, начинающиеся с 'blog/', перенаправляй в приложение blog
    path('blog/', include('blog.urls')),
]
```

blog/views.py:
Импортируем нашу модель Post и используем функцию render.

```python
from django.shortcuts import render
from django.http import HttpResponse
# Импортируем модель Post
from .models import Post

def post_list(request):
    # 1. Получаем ВСЕ опубликованные посты из базы данных.
    # Пока что мы просто получим все, без фильтрации.
    # Метод .all() возвращает QuerySet (набор запросов) - список объектов модели.
    posts = Post.objects.all()

    # 2. Теперь вместо HttpResponse используем render.
    # Первый аргумент - всегда request.
    # Второй аргумент - путь к шаблону (пока его нет, создадим на следующем шаге).
    # Третий аргумент - контекст. Это словарь, который передается в шаблон.
    # Ключи словаря - это имена переменных, которые станут доступны в шаблоне.
    context = {
        'posts': posts, # Передаем наш список постов в шаблон под именем 'posts'
        'title': 'Главная страница блога'
    }
    return render(request, 'blog/post_list.html', context)
```
создал папку template в main добавил post_list.html
```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
</head>
<body>
    <h1>Добро пожаловать в мой блог!</h1>
    <h2>{{ title }}</h2> <!-- Здесь выведется значение переменной title из контекста -->

    <hr> <!-- Горизонтальная линия -->

    <!-- Здесь начнется основная логика вывода постов -->
    {% for post in posts %} <!-- Открываем тег цикла для шаблона -->
        <div>
            <h3>{{ post.title }}</h3> <!-- Обращаемся к атрибуту title объекта post -->
            <p><strong>Автор:</strong> {{ post.author }}</p>
            <p><strong>Дата:</strong> {{ post.created_at }}</p>
            <p>{{ post.content | truncatewords:20 }}</p> <!-- Фильтр: обрезает текст до 20 слов -->
        </div>
        <hr>
    {% endfor %} <!-- Обязательно закрываем цикл -->

</body>
</html>
```
